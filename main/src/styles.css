:root{
  --bg:#0b0b0c; --panel:#111214; --muted:#b4b5b9; --text:#f4f4f5;
  --accent:#7dd3fc; --accent-2:#a78bfa; --danger:#ef4444; --success:#22c55e;
  --shadow:0 8px 24px rgba(0,0,0,.35); --radius:18px; --chip:rgba(255,255,255,.08);
}

*{box-sizing:border-box}
html,body,#app{height:100%}
body{
  margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text); background: radial-gradient(1200px 800px at 50% -20%, #101115 0%, #0a0b0d 60%, #050507 100%);
  display:grid; grid-template-rows:1fr auto; gap:24px; padding:24px; overflow-x:hidden; position:relative; isolation:isolate;
}
body::before,body::after{content:""; position:fixed; inset:-10% -10% auto -10%; z-index:-2; pointer-events:none}
body::before{
  background:
    radial-gradient(600px 360px at 10% -10%, rgba(125,211,252,.2), transparent 60%),
    radial-gradient(700px 400px at 90% 0%, rgba(167,139,250,.18), transparent 60%),
    radial-gradient(500px 320px at 50% 120%, rgba(56,189,248,.14), transparent 60%);
  filter:blur(30px) saturate(120%); animation:floatBg 16s ease-in-out infinite alternate
}
body::after{
  inset:0;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.035"/></svg>');
  background-size:160px 160px; mix-blend-mode:overlay; z-index:-1
}
@keyframes floatBg{0%{transform:translateY(0) translateX(0) scale(1)}100%{transform:translateY(-3%) translateX(-2%) scale(1.03)}}

.container{max-width:1000px;margin:0 auto;width:100%}
.title{font-weight:700;letter-spacing:.2px;margin:6px 0;font-size:clamp(18px,2.2vw,22px);color:#fff}
.hint{color:var(--muted);font-size:13px;margin:0 2px 14px}

.panel{
  display:grid; grid-template-columns:1fr 1fr; gap:20px; width:100%;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
  border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); padding:18px;
  box-shadow:var(--shadow); backdrop-filter:blur(10px) saturate(120%);
}
@media (max-width:760px){ .panel{ grid-template-columns:1fr } }

.unit-toggle{display:flex;gap:8px;align-items:center;justify-content:flex-end;grid-column:1/-1}
.chip{background:var(--chip);border:1px solid rgba(255,255,255,.1);color:#e5e7eb;padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer}
.chip[data-active="true"]{background:#e5f7ff;color:#0b1115;border-color:#9be3ff}

.cards{
  display:grid; grid-template-columns:1fr 1fr; gap:16px; grid-column:1/-1;
  align-items:stretch; perspective:1200px; transform-style:preserve-3d; position:relative;
}
@media (max-width:760px){ .cards{ grid-template-columns:1fr } }
.trap-pop{ position:absolute; right:-18px; top:-24px; width:clamp(180px,28%,260px); transform:rotate(6deg); z-index:5 }
@media (max-width:760px){ .trap-pop{ position:static; width:100%; transform:none } }
.hidden{ display:none !important }

.card{position:relative;border:0;background:transparent;border-radius:22px;padding:0;cursor:pointer;min-height:320px;display:flex}
.hs{
  position:relative;border-radius:22px;flex:1;display:flex;flex-direction:column;padding:14px;
  background:
    radial-gradient(120% 140% at 0% 0%, rgba(255,255,255,.06), transparent 50%),
    radial-gradient(100% 120% at 100% 0%, rgba(255,255,255,.05), transparent 50%),
    linear-gradient(180deg,#1e2026,#121419);
  box-shadow:
    0 2px 0 rgba(255,255,255,.08) inset,
    0 0 0 1px rgba(255,255,255,.08) inset,
    0 16px 28px rgba(0,0,0,.45), 0 4px 10px rgba(0,0,0,.35);
  transform-style:preserve-3d; transition:transform .2s ease, box-shadow .2s ease; outline:2px solid transparent; outline-offset:2px
}
.card:hover .hs{
  transform:rotateY(6deg) rotateX(1deg) translateY(-4px);
  box-shadow:0 2px 0 rgba(255,255,255,.1) inset,0 0 0 1px rgba(255,255,255,.12) inset,0 24px 36px rgba(0,0,0,.55),0 6px 16px rgba(0,0,0,.45)
}

/* Ramki rarity */
.hs::before{
  content:""; position:absolute; inset:-2px; border-radius:24px; padding:2px;
  background:conic-gradient(from 0deg, #fef08a, #facc15, #f59e0b, #fde68a, #facc15, #fef08a);
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; opacity:.85; pointer-events:none
}
.hs[data-rarity="common"]::before{background:conic-gradient(from 0deg,#cbd5e1,#94a3b8,#cbd5e1)}
.hs[data-rarity="rare"]::before{background:conic-gradient(from 0deg,#93c5fd,#60a5fa,#2563eb,#93c5fd)}
.hs[data-rarity="epic"]::before{background:conic-gradient(from 0deg,#d8b4fe,#a78bfa,#7c3aed,#d8b4fe)}
.hs[data-rarity="legendary"]::before{background:conic-gradient(from 0deg,#fef08a,#facc15,#f59e0b,#fde68a,#facc15,#fef08a)}

/* Refleks */
.hs::after{
  content:""; position:absolute; inset:0; border-radius:24px;
  background:linear-gradient(120deg, transparent 35%, rgba(255,255,255,.22) 45%, transparent 55%);
  background-size:180% 180%; background-position:-120% 0; mix-blend-mode:screen; transition:background-position .5s ease,opacity .2s; opacity:.55; pointer-events:none
}
.card:hover .hs::after{ background-position:120% 0 }

/* Flip 3D */
.flip{ position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .5s ease }
.face{ position:absolute; inset:0; backface-visibility:hidden; border-radius:inherit; display:flex; flex-direction:column }
.back{ transform:rotateY(180deg); align-items:center; justify-content:center; gap:8px; font-weight:800 }
.hs.accept .flip{ transform:rotateY(180deg) }

/* Wnętrze karty */
.hs-header{ display:flex; align-items:center; gap:8px; margin-bottom:8px }
.mana{ height:26px; width:26px; border-radius:50%; display:grid; place-items:center; font-weight:800; color:#0c1116;
  background:radial-gradient(circle at 30% 30%, #93c5fd, #60a5fa);
  box-shadow:0 0 0 2px rgba(255,255,255,.2), inset 0 2px 6px rgba(0,0,0,.45)
}
.badge{ margin:0; border-radius:10px; padding:2px 8px; font-size:11px; font-weight:800; letter-spacing:.2px; text-transform:uppercase; border:1px solid transparent }
.badge[data-cat="PRACA"]{ background:rgba(56,189,248,.18); border-color:rgba(56,189,248,.35); color:#d6f5ff }
.badge[data-cat="ZDROWIE"]{ background:rgba(34,197,94,.18); border-color:rgba(34,197,94,.35); color:#d8ffe8 }
.badge[data-cat="PUŁAPKA"]{ background:rgba(239,68,68,.2); border-color:rgba(239,68,68,.35); color:#fecaca }

.art{ position:relative; border-radius:16px; overflow:hidden; height:140px; margin-bottom:10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), inset 0 -24px 40px rgba(0,0,0,.45)
}
.art::before{
  content:""; position:absolute; inset:0;
  background: radial-gradient(120% 80% at 50% 0%, rgba(255,255,255,.18), transparent 60%),
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><rect width="10" height="10" fill="%2324262b"/></svg>');
  background-size: cover, 10px 10px; filter:saturate(110%)
}
.title-row{ display:flex; align-items:center; gap:8px }
.card h3{ margin:0; font-size:18px; font-weight:800; letter-spacing:.2px }
.card p{ margin:6px 0 8px; color:var(--muted); font-size:13px; line-height:1.35 }
.ribbon{ position:absolute; top:-8px; left:-10px; transform:rotate(-12deg); background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7)); color:#111; font-weight:900; letter-spacing:.3px; font-size:10px; padding:4px 14px; border-radius:6px; box-shadow:0 6px 12px rgba(0,0,0,.35) }
.ribbon.risk{ background:linear-gradient(180deg,#fecaca,#f97316); color:#111 }
.ribbon.wellbeing{ background:linear-gradient(180deg,#bbf7d0,#22c55e); color:#062 }

.radio{ position:absolute; right:10px; top:10px; height:22px; width:22px; border-radius:999px; border:2px solid rgba(255,255,255,.6); display:grid; place-items:center; background:rgba(0,0,0,.25) }
.card[aria-checked="true"] .radio{ border-color:var(--accent); box-shadow:0 0 12px rgba(125,211,252,.45) }
.radio::after{ content:""; height:10px; width:10px; border-radius:999px; background:transparent; transition:background .18s }
.card[aria-checked="true"] .radio::after{ background:var(--accent) }

.actions{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:6px; grid-column:1/-1 }
.summary{ color:var(--muted); font-size:13px }
.summary strong{ color:#fff }
.btn{ appearance:none; border:none; cursor:pointer; font-weight:700; letter-spacing:.2px; padding:10px 14px; border-radius:10px; transition:transform .1s ease, opacity .2s, box-shadow .2s }
.btn.ghost{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.12) }

/* Oś życia */
.timeline-wrap{ width:100%; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.012)); border-top:1px solid rgba(255,255,255,.08); padding:12px 4px 18px }
.timeline{ position:relative; max-width:1000px; margin:0 auto }
.axis{ position:relative; height:8px; background:#1f2126; border-radius:99px; border:1px solid rgba(255,255,255,.08) }
.tick{ position:absolute; top:50%; width:1px; height:16px; background:rgba(255,255,255,.25); transform:translate(-50%,-50%) }
.tick-label{ position:absolute; top:18px; transform:translateX(-50%); font-size:11px; color:var(--muted) }
.phase-label{ position:absolute; top:34px; transform:translateX(-50%); font-size:11px; color:#cbd5e1; white-space:nowrap }
.ret-line{ position:absolute; top:50%; transform:translate(-50%,-50%); width:2px; height:26px; background:var(--accent-2); box-shadow:0 0 0 2px rgba(167,139,250,.15) }
.ret-label{ position:absolute; top:-22px; transform:translateX(-50%); font-size:11px; color:#ddd }
.marker{ position:absolute; top:-12px; height:32px; width:32px; border-radius:50%; border:2px solid #fff; background:#0f1115; display:grid; place-items:center; font-size:18px; transform:translateX(-50%); transition:left .35s ease; box-shadow:0 10px 16px rgba(0,0,0,.4) }
.labels{ display:flex; justify-content:space-between; align-items:center; margin:8px 2px 0; font-size:12px; color:var(--muted) }
.age-ctrl{ display:flex; gap:8px; align-items:center; justify-content:flex-end; margin-top:8px }
.age-ctrl button{ background:transparent; color:#e5e7eb; border:1px solid rgba(255,255,255,.12); border-radius:8px; padding:6px 10px; cursor:pointer }

